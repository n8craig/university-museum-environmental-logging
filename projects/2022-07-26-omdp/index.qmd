---
title: "Organ Mountains Desert Peaks Perishables Exhibit"
author: "Nathan Craig"
---

```{r setup, include=FALSE}

# Knitr options
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE
  )

# Load data
# source("read_data.R")
# sys.source("read_data.R")
# library(ggplot2)

library(readr) # read CSV file
library(tidyverse)
# library(plotly) # interactive plots

# Time series
library(xts) # convert df to ts
library(dygraphs) # plot ts 

```


```{r read-data}
source(here::here("projects/2022-07-26-omdp/scripts/read_data_omdp.R"))
```

```{r set-alpha}
plot_alpha <- 0.7
```


Generally, being put on exhibit stresses objects. This is largely because high amplitude changes in environmental conditions stress objects, and the environmental conditions in a gallery often fluctuate more than the environmental conditions in storage. For delicate organic materials and textiles this issue of damage caused by fluctuating environmental conditions is particularly acute.  

In the Fall of 2022, the University Museum will be exhibiting delicate archaeological perishables from Chavez Cave in the Organ Mountains of Las Cruces, NM. Exhibiting these objects thus presents some conservation challenges.

Given the research and heritage importance of these irreplaceable objects, and their delicate nature, we took several precautionary steps to ensure their safety while on display. Key among those was tracking environmental conditions and mitigating potentially harmful situations.

One of our primary concerns was determining the environmental conditions of the West Gallery and the specific micro-environments of the display cases. While we record environmental conditions in several rooms of the Museum, previously we were not logging conditions in the West Gallery because there were no organic materials on display. Therefore, to track the conditions in the West Gallery before setting up the exhibit we placed one of the Museum's standard loggers in the room in early July of 2022. Several weeks later we followed up by including two additional loggers in the gallery that can be used to compare micro-environmental conditions inside and outside of display cases containing the objects. In total, three loggers were placed in the West Gallery: an EasyLog EL-SIE-2+ which is the primary logger used in the museum, and two Govee H5101 bluetooth loggers (@fig-loggers).

::: {.column-margin}
![EasyLog EL-SIE-2+ in the front and two Govee H5101 bluetooth loggers in the back.](images/three_loggers_start.jpg){#fig-loggers}
:::

First, we wanted to see if the Govee loggers were consistent with readings generated by the EasyLog ([Figures @fig-wg-temp-all] and [-@fig-wg-rh-all]). If the data are consistent, then the Govee loggers can be used to compare conditions inside and outside of the display cases. After running these three loggers for 48 hours, we pulled the data to see if the three devices were getting consistent readings.

Second, we wanted to see if the conditions within the display cases are more stable than the conditions outside of the display cases. NOTE THIS IS NOT COMPLETE.

::: panel-tabset
## Temperature

::: column-page
```{r temp-all}
#| label: fig-wg-temp-all
#| fig-cap: "Temperature readings across all monitored rooms."

ts_list$temp_merge %>% 
  window(., start = "2022-07-22 10:00:00") %>% 
  dygraph(.,
          main = "Temperature (째F) comparison") %>% 
    dyRoller(rollPeriod = 10) %>% 
    dyHighlight(highlightCircleSize = 5,
                highlightSeriesBackgroundAlpha = 0.2,
                hideOnMouseOut = TRUE) %>% 
    dySeries("wg_temp", label = "West Gallery Logger") %>% 
    dySeries("omdp1_temp", label = "OMDP Logger 1") %>% 
    dySeries("omdp2_temp", label = "OMDP Logger 2") %>% 
      dyLimit(65, color = "Red", label = "Temp Lower") %>% 
    dyLimit(75, color = "Red", label = "Temp Upper") %>% 
    dyAxis("y", label = "Temperature (째F)") %>% 
    dyRangeSelector()
```
:::

## Relative Humidity

::: column-page
```{r rh-all}
#| label: fig-wg-rh-all
#| fig-cap: "Relative humidity readings across all monitored rooms."

ts_list$rh_merge %>% 
  window(., start = "2022-07-22 10:00:00") %>% 
  dygraph(.,
          main = "% Relative Humidity (째F) comparison") %>% 
    dyRoller(rollPeriod = 10) %>% 
    dyHighlight(highlightCircleSize = 5,
                highlightSeriesBackgroundAlpha = 0.2,
                hideOnMouseOut = TRUE) %>% 
    dySeries("wg_rh", label = "West Gallery Logger") %>% 
    dySeries("omdp1_rh", label = "OMDP Logger 1") %>% 
    dySeries("omdp2_rh", label = "OMDP Logger 2") %>% 
    dyLimit(45, color = "Blue", label = "RH Lower") %>% 
    dyLimit(55, color = "Blue", label = "RH Upper") %>% 
    dyAxis("y", label = "% RH (째F)") %>% 
    dyRangeSelector()
```
:::


:::

